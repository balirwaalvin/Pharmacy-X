# Database Import Guide for DigitalOcean

This guide provides multiple methods to import your PharmacyX_DB.sql schema to your DigitalOcean managed database.

## Method 1: Using DigitalOcean Database Console (Easiest)

1. **Access Database Console**
   - Go to DigitalOcean Dashboard → Databases
   - Click on your database cluster
   - Click "Console" tab
   - This opens a web-based MySQL console

2. **Import SQL File**
   - Click "Import" or look for file upload option
   - Upload `Database/PharmacyX_DB.sql`
   - Execute the import
   - Check for any error messages

## Method 2: Using MySQL Command Line

### Prerequisites
- Install MySQL client on your computer
- Get database connection details from DigitalOcean

### Windows (using Command Prompt/PowerShell)
```cmd
# Download MySQL client if not installed
# https://dev.mysql.com/downloads/mysql/

# Import database (replace with your actual details)
mysql -h your-db-host -P 25060 -u your-username -p your-database-name < "C:\pharmacy-project\Database\PharmacyX_DB.sql"
```

### Mac/Linux
```bash
# Install MySQL client
# Ubuntu: sudo apt install mysql-client
# Mac: brew install mysql-client

# Import database
mysql -h your-db-host -P 25060 -u your-username -p your-database-name < Database/PharmacyX_DB.sql
```

## Method 3: Using MySQL Workbench (Recommended)

1. **Download MySQL Workbench**
   - Visit: https://dev.mysql.com/downloads/workbench/
   - Install for your operating system

2. **Create Connection**
   - Open MySQL Workbench
   - Click "+" to create new connection
   - Enter your DigitalOcean database details:
     - Connection Name: Pharmacy-X DB
     - Hostname: [from DigitalOcean]
     - Port: 25060 (DigitalOcean default)
     - Username: [from DigitalOcean]
     - Password: [from DigitalOcean]

3. **Import Schema**
   - Connect to your database
   - Go to Server → Data Import
   - Choose "Import from Self-Contained File"
   - Select `PharmacyX_DB.sql`
   - Select target schema (your database name)
   - Click "Start Import"

## Method 4: Using phpMyAdmin (if available)

If your hosting provides phpMyAdmin:

1. **Access phpMyAdmin**
   - Login to your DigitalOcean database via phpMyAdmin
   - Or use a local phpMyAdmin pointing to your database

2. **Import SQL**
   - Select your database
   - Click "Import" tab
   - Choose file: `PharmacyX_DB.sql`
   - Click "Go"

## Method 5: Manual Table Creation (Last Resort)

If file import fails, create tables manually:

```sql
-- Copy and paste each CREATE TABLE statement from PharmacyX_DB.sql
-- Execute them one by one in your database console

-- Example for Messages table:
CREATE TABLE `Messages` (
  `message_id` int(11) NOT NULL,
  `user_name` varchar(100) DEFAULT NULL,
  `name` varchar(100) DEFAULT NULL,
  `message_text` text NOT NULL,
  `contact_no` varchar(15) DEFAULT NULL,
  `email` varchar(255) NOT NULL,
  `Uploads_url` varchar(255) DEFAULT NULL,
  `response_text` text DEFAULT NULL,
  `message_date` timestamp NOT NULL DEFAULT current_timestamp()
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_general_ci;

-- Don't forget to add PRIMARY KEYs and AUTO_INCREMENT at the end!
```

## Troubleshooting Common Issues

### Issue: "Access Denied"
- **Solution**: Check username/password from DigitalOcean dashboard
- Ensure database user has import/create privileges

### Issue: "Unknown Database"
- **Solution**: Make sure you're connecting to the right database name
- Check database name in DigitalOcean dashboard

### Issue: "Connection Refused"
- **Solution**: Check host and port (usually 25060 for DigitalOcean)
- Ensure database cluster is running

### Issue: "File Too Large"
- **Solution**: 
  - Use command line method instead of web interface
  - Split SQL file into smaller parts
  - Increase upload limits if using web interface

### Issue: "Syntax Errors"
- **Solution**: The SQL file might need modification for MySQL 8
- Remove any MariaDB-specific syntax
- Ensure character set compatibility

## Verification

After import, verify with these queries:
```sql
-- Check if tables exist
SHOW TABLES;

-- Check table structure
DESCRIBE Messages;
DESCRIBE Orders;
DESCRIBE Payment;
DESCRIBE Products;
DESCRIBE User_info;

-- Check if data was imported
SELECT COUNT(*) FROM Messages;
SELECT COUNT(*) FROM Products;
SELECT COUNT(*) FROM User_info;
```

## Database Connection Details

Get these from your DigitalOcean database dashboard:
- **Host**: Usually ends with `.db.ondigitalocean.com`
- **Port**: Usually `25060`
- **Username**: Usually starts with `doadmin`
- **Password**: Generated by DigitalOcean
- **Database**: Your database name

## Test Your Import

After importing, test the connection using:
```
https://your-app-name.ondigitalocean.app/db_test.php
```

This will show if tables were created successfully.
