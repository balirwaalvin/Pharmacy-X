# Apache configuration for DigitalOcean App Platform
ServerName pharmacy-x.ondigitalocean.app

# Security settings
ServerTokens Prod
ServerSignature Off

# Document root
DocumentRoot /var/www/html

# Directory permissions
<Directory /var/www/html>
    Options -Indexes +FollowSymLinks
    AllowOverride All
    Require all granted
</Directory>

# PHP configuration
<FilesMatch \.php$>
    SetHandler application/x-httpd-php
</FilesMatch>

# Upload directory protection
<Directory /var/www/html/Images/PaymentSlips>
    Options -Indexes
    AllowOverride None
</Directory>

<Directory /var/www/html/Images/PrescriptionMessage>
    Options -Indexes
    AllowOverride None
</Directory>

<Directory /var/www/html/Images/PrescriptionOrders>
    Options -Indexes
    AllowOverride None
</Directory>

<Directory /var/www/html/Images/Profile_Pics>
    Options -Indexes
    AllowOverride None
</Directory>

# Error and access logs
ErrorLog ${APACHE_LOG_DIR}/error.log
CustomLog ${APACHE_LOG_DIR}/access.log combined

# Gzip compression
LoadModule deflate_module modules/mod_deflate.so
<Location />
    SetOutputFilter DEFLATE
    SetEnvIfNoCase Request_URI \
        \.(?:gif|jpe?g|png)$ no-gzip dont-vary
    SetEnvIfNoCase Request_URI \
        \.(?:exe|t?gz|zip|bz2|sit|rar)$ no-gzip dont-vary
</Location>
